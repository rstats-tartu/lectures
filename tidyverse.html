<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Reprodutseeritav andmeanalüüs kasutades R keelt</title>
  <meta name="description" content="Praktilise kursuse ‘Reprodutseeritav andmeanalüüs R keeles’ materjalid.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Reprodutseeritav andmeanalüüs kasutades R keelt" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/cover.png" />
  <meta property="og:description" content="Praktilise kursuse ‘Reprodutseeritav andmeanalüüs R keeles’ materjalid." />
  <meta name="github-repo" content="rstats-tartu/lectures" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Reprodutseeritav andmeanalüüs kasutades R keelt" />
  
  <meta name="twitter:description" content="Praktilise kursuse ‘Reprodutseeritav andmeanalüüs R keeles’ materjalid." />
  <meta name="twitter:image" content="img/cover.png" />

<meta name="author" content="Taavi Päll, Ülo Maiväli">


<meta name="date" content="2018-09-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html">
<link rel="next" href="lisa-funktsioonid.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<script src="https://use.fontawesome.com/e4ba4259a1.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reprodutseeritav andmeanalüüs R programmiga</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Haara kannel, Vanemuine!</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Sissejuhatus</a></li>
<li class="chapter" data-level="2" data-path="r-keel.html"><a href="r-keel.html"><i class="fa fa-check"></i><b>2</b> R keel</a></li>
<li class="chapter" data-level="3" data-path="andmeanaluus.html"><a href="andmeanaluus.html"><i class="fa fa-check"></i><b>3</b> Andmeanalüüs</a><ul>
<li class="chapter" data-level="3.1" data-path="andmeanaluus.html"><a href="andmeanaluus.html#mida-andmeanaluutik-peaks-kusima-enne-kui-ta-alustab."><i class="fa fa-check"></i><b>3.1</b> Mida andmeanalüütik peaks küsima, enne kui ta alustab.</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>4</b> Tarkvaratööriistad</a><ul>
<li class="chapter" data-level="4.1" data-path="tools.html"><a href="tools.html#installeeri-vajalikud-programmid"><i class="fa fa-check"></i><b>4.1</b> Installeeri vajalikud programmid</a></li>
<li class="chapter" data-level="4.2" data-path="tools.html"><a href="tools.html#loo-githubi-konto"><i class="fa fa-check"></i><b>4.2</b> Loo GitHubi konto</a></li>
<li class="chapter" data-level="4.3" data-path="tools.html"><a href="tools.html#loo-uus-r-projekt"><i class="fa fa-check"></i><b>4.3</b> Loo uus R projekt</a></li>
<li class="chapter" data-level="4.4" data-path="tools.html"><a href="tools.html#git-merge-konfliktid"><i class="fa fa-check"></i><b>4.4</b> Git <em>Merge</em> konfliktid</a></li>
<li class="chapter" data-level="4.5" data-path="tools.html"><a href="tools.html#r-projekti-kataloogi-soovitatav-minimaalne-struktuur"><i class="fa fa-check"></i><b>4.5</b> R projekti kataloogi soovitatav minimaalne struktuur</a></li>
<li class="chapter" data-level="4.6" data-path="tools.html"><a href="tools.html#libs"><i class="fa fa-check"></i><b>4.6</b> Pakettide installeerimine</a></li>
<li class="chapter" data-level="4.7" data-path="tools.html"><a href="tools.html#r-repositooriumid"><i class="fa fa-check"></i><b>4.7</b> R repositooriumid</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="calc.html"><a href="calc.html"><i class="fa fa-check"></i><b>5</b> R on kalkulaator</a></li>
<li class="chapter" data-level="6" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html"><i class="fa fa-check"></i><b>6</b> R-i tööpõhimõte</a><ul>
<li class="chapter" data-level="6.1" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#funktsioon"><i class="fa fa-check"></i><b>6.1</b> Funktsioon</a></li>
<li class="chapter" data-level="6.2" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#sama-koodi-saab-kirjutada-neljal-erineval-viisil"><i class="fa fa-check"></i><b>6.2</b> Sama koodi saab kirjutada neljal erineval viisil</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#esimene-voimalus---anname-jarjest-tekkinud-objektid-samale-nimele."><i class="fa fa-check"></i><b>6.2.1</b> Esimene võimalus - anname järjest tekkinud objektid samale nimele.</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#teine-voimalus---uued-nimed."><i class="fa fa-check"></i><b>6.2.2</b> Teine võimalus - uued nimed.</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#kolmas-voimalus-on-luhem-variant-esimesest."><i class="fa fa-check"></i><b>6.2.3</b> Kolmas võimalus on lühem variant esimesest.</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#neljas-voimalus-klassikaline-baas-r-lahendus"><i class="fa fa-check"></i><b>6.2.4</b> Neljas võimalus, klassikaline baas R lahendus:</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#obj"><i class="fa fa-check"></i><b>6.3</b> objekt</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#objekt-ja-nimi"><i class="fa fa-check"></i><b>6.3.1</b> Objekt ja nimi</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#andmete-tuubid"><i class="fa fa-check"></i><b>6.4</b> Andmete tüübid</a></li>
<li class="chapter" data-level="6.5" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#objektide-klassid"><i class="fa fa-check"></i><b>6.5</b> Objektide klassid</a><ul>
<li class="chapter" data-level="6.5.1" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#vektor"><i class="fa fa-check"></i><b>6.5.1</b> Vektor</a></li>
<li class="chapter" data-level="6.5.2" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#list"><i class="fa fa-check"></i><b>6.5.2</b> List</a></li>
<li class="chapter" data-level="6.5.3" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#data-frame-ja-tibble"><i class="fa fa-check"></i><b>6.5.3</b> data frame ja tibble</a></li>
<li class="chapter" data-level="6.5.4" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#matrix"><i class="fa fa-check"></i><b>6.5.4</b> Matrix</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#indekseerimine"><i class="fa fa-check"></i><b>6.6</b> Indekseerimine</a><ul>
<li class="chapter" data-level="6.6.1" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#vektorid-ja-nende-indeksid-on-uhedimensionaalsed"><i class="fa fa-check"></i><b>6.6.1</b> Vektorid ja nende indeksid on ühedimensionaalsed</a></li>
<li class="chapter" data-level="6.6.2" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#andmeraamid-ja-maatriksid-on-kahedimensionaalsed-nagu-ka-nende-indeksid"><i class="fa fa-check"></i><b>6.6.2</b> Andmeraamid ja maatriksid on kahedimensionaalsed, nagu ka nende indeksid</a></li>
<li class="chapter" data-level="6.6.3" data-path="r-i-toopohimote.html"><a href="r-i-toopohimote.html#listide-indekseerimine"><i class="fa fa-check"></i><b>6.6.3</b> Listide indekseerimine</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html"><i class="fa fa-check"></i><b>7</b> Lihtne töö Andmeraamidega</a><ul>
<li class="chapter" data-level="7.0.1" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#rekodeerime-andmeraami-vaartusi"><i class="fa fa-check"></i><b>7.0.1</b> Rekodeerime andmeraami väärtusi</a></li>
<li class="chapter" data-level="7.0.2" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#uhendame-kaks-andmeraami-rea-kaupa"><i class="fa fa-check"></i><b>7.0.2</b> Ühendame kaks andmeraami rea kaupa</a></li>
<li class="chapter" data-level="7.0.3" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#uhendame-kaks-andmeraami-veeru-kaupa"><i class="fa fa-check"></i><b>7.0.3</b> ühendame kaks andmeraami veeru kaupa</a></li>
<li class="chapter" data-level="7.0.4" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#andmeraamide-uhendamine-join-ga"><i class="fa fa-check"></i><b>7.0.4</b> andmeraamide ühendamine join()-ga</a></li>
<li class="chapter" data-level="7.0.5" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#nii-saab-raamist-katte-vektori-millega-tehteid-teha."><i class="fa fa-check"></i><b>7.0.5</b> Nii saab raamist kätte vektori, millega tehteid teha.</a></li>
<li class="chapter" data-level="7.1" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#andmeraamide-salvestamine-eksport-import"><i class="fa fa-check"></i><b>7.1</b> Andmeraamide salvestamine (eksport-import)</a></li>
<li class="chapter" data-level="7.2" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#na-d"><i class="fa fa-check"></i><b>7.2</b> NA-d</a><ul>
<li class="chapter" data-level="7.2.1" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#mitu-na-d-on-igas-tulbas"><i class="fa fa-check"></i><b>7.2.1</b> Mitu NA-d on igas tulbas?</a></li>
<li class="chapter" data-level="7.2.2" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#kuidas-rekodeerida-na-d-naiteks-0-ks"><i class="fa fa-check"></i><b>7.2.2</b> Kuidas rekodeerida NA-d näiteks 0-ks:</a></li>
<li class="chapter" data-level="7.2.3" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#rekodeerime-na-ks"><i class="fa fa-check"></i><b>7.2.3</b> Rekodeerime NA-ks</a></li>
<li class="chapter" data-level="7.2.4" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#drop_na-viskab-tabelist-valja-na-dega-read"><i class="fa fa-check"></i><b>7.2.4</b> drop_na() viskab tabelist välja NA-dega read</a></li>
<li class="chapter" data-level="7.2.5" data-path="lihtne-too-andmeraamidega.html"><a href="lihtne-too-andmeraamidega.html#viska-tabelist-valja-veerud-milles-on-liiga-palju-na-sid"><i class="fa fa-check"></i><b>7.2.5</b> viska tabelist välja veerud, milles on liiga palju NA-sid</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="itereerimine-ja-map-sama-operatsioon-mitu-korda.html"><a href="itereerimine-ja-map-sama-operatsioon-mitu-korda.html"><i class="fa fa-check"></i><b>8</b> itereerimine ja map() - sama operatsioon mitu korda</a><ul>
<li class="chapter" data-level="8.0.1" data-path="itereerimine-ja-map-sama-operatsioon-mitu-korda.html"><a href="itereerimine-ja-map-sama-operatsioon-mitu-korda.html#map2"><i class="fa fa-check"></i><b>8.0.1</b> map2()</a></li>
<li class="chapter" data-level="8.0.2" data-path="itereerimine-ja-map-sama-operatsioon-mitu-korda.html"><a href="itereerimine-ja-map-sama-operatsioon-mitu-korda.html#pmap"><i class="fa fa-check"></i><b>8.0.2</b> pmap()</a></li>
<li class="chapter" data-level="8.0.3" data-path="itereerimine-ja-map-sama-operatsioon-mitu-korda.html"><a href="itereerimine-ja-map-sama-operatsioon-mitu-korda.html#invoke_map"><i class="fa fa-check"></i><b>8.0.3</b> invoke_map()</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>9</b> Regular expression ja find &amp; replace</a><ul>
<li class="chapter" data-level="9.1" data-path="regex.html"><a href="regex.html#common-operations-with-regular-expressions"><i class="fa fa-check"></i><b>9.1</b> Common operations with regular expressions</a></li>
<li class="chapter" data-level="9.2" data-path="regex.html"><a href="regex.html#find-and-replace"><i class="fa fa-check"></i><b>9.2</b> Find and replace</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="funs.html"><a href="funs.html"><i class="fa fa-check"></i><b>10</b> Funktsioonid on R keele verbid</a><ul>
<li class="chapter" data-level="10.1" data-path="funs.html"><a href="funs.html#kirjutame-r-funktsiooni"><i class="fa fa-check"></i><b>10.1</b> Kirjutame R funktsiooni</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html"><i class="fa fa-check"></i><b>11</b> Graafilised lahendused</a><ul>
<li class="chapter" data-level="11.1" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#baasgraafika"><i class="fa fa-check"></i><b>11.1</b> Baasgraafika</a></li>
<li class="chapter" data-level="11.2" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#ggplot2"><i class="fa fa-check"></i><b>11.2</b> ggplot2</a><ul>
<li class="chapter" data-level="11.2.1" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#lisame-plotile-sirgjooni"><i class="fa fa-check"></i><b>11.2.1</b> Lisame plotile sirgjooni</a></li>
<li class="chapter" data-level="11.2.2" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#segmendid-ja-nooled"><i class="fa fa-check"></i><b>11.2.2</b> Segmendid ja nooled</a></li>
<li class="chapter" data-level="11.2.3" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#joongraafikud"><i class="fa fa-check"></i><b>11.2.3</b> Joongraafikud</a></li>
<li class="chapter" data-level="11.2.4" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#punktide-tahistamise-trikid"><i class="fa fa-check"></i><b>11.2.4</b> Punktide tähistamise trikid</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#facet-pisigraafik"><i class="fa fa-check"></i><b>11.3</b> <em>Facet</em> – pisigraafik</a></li>
<li class="chapter" data-level="11.4" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#mitu-graafikut-paneelidena-uhel-joonisel"><i class="fa fa-check"></i><b>11.4</b> Mitu graafikut paneelidena ühel joonisel</a></li>
<li class="chapter" data-level="11.5" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#teljed"><i class="fa fa-check"></i><b>11.5</b> Teljed</a><ul>
<li class="chapter" data-level="11.5.1" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#telgede-ulatus"><i class="fa fa-check"></i><b>11.5.1</b> Telgede ulatus</a></li>
<li class="chapter" data-level="11.5.2" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#log-skaalas-teljed"><i class="fa fa-check"></i><b>11.5.2</b> Log skaalas teljed</a></li>
<li class="chapter" data-level="11.5.3" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#poorame-graafikut-90-kraadi"><i class="fa fa-check"></i><b>11.5.3</b> Pöörame graafikut 90 kraadi</a></li>
<li class="chapter" data-level="11.5.4" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#muudame-telgede-markeeringuid"><i class="fa fa-check"></i><b>11.5.4</b> Muudame telgede markeeringuid</a></li>
<li class="chapter" data-level="11.5.5" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#telgede-ja-legendi-nimed"><i class="fa fa-check"></i><b>11.5.5</b> telgede ja legendi nimed</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#graafiku-pealkiri-alapeakiri-ja-allkiri"><i class="fa fa-check"></i><b>11.6</b> Graafiku pealkiri, alapeakiri ja allkiri</a><ul>
<li class="chapter" data-level="11.6.1" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#tapitahed-jms-graafikutel"><i class="fa fa-check"></i><b>11.6.1</b> Täpitähed jms graafikutel</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#graafiku-legend"><i class="fa fa-check"></i><b>11.7</b> Graafiku legend</a></li>
<li class="chapter" data-level="11.8" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#varviskaalad"><i class="fa fa-check"></i><b>11.8</b> Värviskaalad</a><ul>
<li class="chapter" data-level="11.8.1" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#varviskaalad-pidevatele-muutujatele"><i class="fa fa-check"></i><b>11.8.1</b> Värviskaalad pidevatele muutujatele</a></li>
<li class="chapter" data-level="11.8.2" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#varviskaalad-faktormuutujatele"><i class="fa fa-check"></i><b>11.8.2</b> Värviskaalad faktormuutujatele</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="graafilised-lahendused.html"><a href="graafilised-lahendused.html#a-complex-ggplot"><i class="fa fa-check"></i><b>11.9</b> A complex ggplot</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><i class="fa fa-check"></i><b>12</b> Kuraditosin graafikut, mida sa peaksid enne surma joonistama</a><ul>
<li class="chapter" data-level="12.1" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#cleveland-plot"><i class="fa fa-check"></i><b>12.1</b> Cleveland plot</a></li>
<li class="chapter" data-level="12.2" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#andmepunktid-mediaani-voi-aritmeetilise-keskmisega"><i class="fa fa-check"></i><b>12.2</b> Andmepunktid mediaani või aritmeetilise keskmisega</a></li>
<li class="chapter" data-level="12.3" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#histogramm"><i class="fa fa-check"></i><b>12.3</b> Histogramm</a></li>
<li class="chapter" data-level="12.4" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#tihedusplot"><i class="fa fa-check"></i><b>12.4</b> Tihedusplot</a></li>
<li class="chapter" data-level="12.5" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#boxplot"><i class="fa fa-check"></i><b>12.5</b> Boxplot</a></li>
<li class="chapter" data-level="12.6" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#joongraafikud-1"><i class="fa fa-check"></i><b>12.6</b> Joongraafikud</a></li>
<li class="chapter" data-level="12.7" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#scatter-plot"><i class="fa fa-check"></i><b>12.7</b> Scatter plot</a><ul>
<li class="chapter" data-level="12.7.1" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#kaalutud-lineaarne-mudel"><i class="fa fa-check"></i><b>12.7.1</b> Kaalutud lineaarne mudel</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#tulpdiagramm"><i class="fa fa-check"></i><b>12.8</b> Tulpdiagramm</a></li>
<li class="chapter" data-level="12.9" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#residuaalide-plot"><i class="fa fa-check"></i><b>12.9</b> Residuaalide plot</a></li>
<li class="chapter" data-level="12.10" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#tukey-summa-erinevuse-graafik"><i class="fa fa-check"></i><b>12.10</b> Tukey summa-erinevuse graafik</a><ul>
<li class="chapter" data-level="12.10.1" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#vulkaaniplot"><i class="fa fa-check"></i><b>12.10.1</b> Vulkaaniplot</a></li>
</ul></li>
<li class="chapter" data-level="12.11" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#qq-plot"><i class="fa fa-check"></i><b>12.11</b> QQ-plot</a></li>
<li class="chapter" data-level="12.12" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#heat-map"><i class="fa fa-check"></i><b>12.12</b> Heat map</a><ul>
<li class="chapter" data-level="12.12.1" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#korrelatsioonimaatriksid-heat-mapina"><i class="fa fa-check"></i><b>12.12.1</b> Korrelatsioonimaatriksid heat mapina</a></li>
<li class="chapter" data-level="12.12.2" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#paraleelkoordinaatgraafik"><i class="fa fa-check"></i><b>12.12.2</b> Paraleelkoordinaatgraafik</a></li>
<li class="chapter" data-level="12.12.3" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#korrelatsioonid-vorgustikuna"><i class="fa fa-check"></i><b>12.12.3</b> Korrelatsioonid võrgustikuna</a></li>
</ul></li>
<li class="chapter" data-level="12.13" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#biplot-ja-peakomponentanaluus"><i class="fa fa-check"></i><b>12.13</b> Biplot ja peakomponentanalüüs</a><ul>
<li class="chapter" data-level="12.13.1" data-path="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html"><a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html#t-sne"><i class="fa fa-check"></i><b>12.13.1</b> t-sne</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>13</b> Tidyverse</a><ul>
<li class="chapter" data-level="13.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy-tabeli-struktuur"><i class="fa fa-check"></i><b>13.1</b> Tidy tabeli struktuur</a><ul>
<li class="chapter" data-level="13.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tabeli-dimensioonide-muutmine-pikk-ja-lai-formaat"><i class="fa fa-check"></i><b>13.1.1</b> Tabeli dimensioonide muutmine (pikk ja lai formaat)</a></li>
<li class="chapter" data-level="13.1.2" data-path="tidyverse.html"><a href="tidyverse.html#tibble-transpose-read-veergudeks-ja-vastupidi"><i class="fa fa-check"></i><b>13.1.2</b> Tibble transpose — read veergudeks ja vastupidi</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="tidyverse.html"><a href="tidyverse.html#dplyr-ja-selle-viis-verbi"><i class="fa fa-check"></i><b>13.2</b> dplyr ja selle viis verbi</a><ul>
<li class="chapter" data-level="13.2.1" data-path="tidyverse.html"><a href="tidyverse.html#select-columns"><i class="fa fa-check"></i><b>13.2.1</b> <code>select()</code> columns</a></li>
<li class="chapter" data-level="13.2.2" data-path="tidyverse.html"><a href="tidyverse.html#filter-rows"><i class="fa fa-check"></i><b>13.2.2</b> <code>filter()</code> rows</a></li>
<li class="chapter" data-level="13.2.3" data-path="tidyverse.html"><a href="tidyverse.html#summarise"><i class="fa fa-check"></i><b>13.2.3</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="13.2.4" data-path="tidyverse.html"><a href="tidyverse.html#group_by"><i class="fa fa-check"></i><b>13.2.4</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="13.2.5" data-path="tidyverse.html"><a href="tidyverse.html#mutate"><i class="fa fa-check"></i><b>13.2.5</b> <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="tidyverse.html"><a href="tidyverse.html#separate-uks-veerg-mitmeks"><i class="fa fa-check"></i><b>13.3</b> <code>separate()</code> üks veerg mitmeks</a></li>
<li class="chapter" data-level="13.4" data-path="tidyverse.html"><a href="tidyverse.html#faktorid"><i class="fa fa-check"></i><b>13.4</b> Faktorid</a><ul>
<li class="chapter" data-level="13.4.1" data-path="tidyverse.html"><a href="tidyverse.html#tekitame-faktortulba-keerulisemal-teel"><i class="fa fa-check"></i><b>13.4.1</b> tekitame faktortulba keerulisemal teel</a></li>
<li class="chapter" data-level="13.4.2" data-path="tidyverse.html"><a href="tidyverse.html#droplevels-viskab-valja-kasutamata-faktori-tasemed"><i class="fa fa-check"></i><b>13.4.2</b> <code>droplevels()</code> viskab välja kasutamata faktori tasemed</a></li>
<li class="chapter" data-level="13.4.3" data-path="tidyverse.html"><a href="tidyverse.html#fct_recode-rekodeerib-faktori-tasemed"><i class="fa fa-check"></i><b>13.4.3</b> <code>fct_recode()</code> rekodeerib faktori tasemed</a></li>
<li class="chapter" data-level="13.4.4" data-path="tidyverse.html"><a href="tidyverse.html#fct_collapse-annab-argumenti-sisse-vanade-tasemete-vektori-et-teha-vahem-uusi-tasemeid."><i class="fa fa-check"></i><b>13.4.4</b> <code>fct_collapse()</code> annab argumenti sisse vanade tasemete vektori, et teha vähem uusi tasemeid.</a></li>
<li class="chapter" data-level="13.4.5" data-path="tidyverse.html"><a href="tidyverse.html#fct_lump-loob-kokku-koik-vahem-arv-kordi-esinevad-tasemed."><i class="fa fa-check"></i><b>13.4.5</b> <code>fct_lump()</code> lööb kokku kõik vähem arv kordi esinevad tasemed.</a></li>
<li class="chapter" data-level="13.4.6" data-path="tidyverse.html"><a href="tidyverse.html#rekodeerime-pideva-muutuja-faktoriks"><i class="fa fa-check"></i><b>13.4.6</b> Rekodeerime pideva muutuja faktoriks</a></li>
<li class="chapter" data-level="13.4.7" data-path="tidyverse.html"><a href="tidyverse.html#muudame-faktori-tasemete-jarjekorda-joonisel"><i class="fa fa-check"></i><b>13.4.7</b> Muudame faktori tasemete järjekorda joonisel</a></li>
<li class="chapter" data-level="13.4.8" data-path="tidyverse.html"><a href="tidyverse.html#fct_relevel-tostab-joonisel-osad-tasemed-teistest-ettepoole"><i class="fa fa-check"></i><b>13.4.8</b> <code>fct_relevel()</code> tõstab joonisel osad tasemed teistest ettepoole</a></li>
<li class="chapter" data-level="13.4.9" data-path="tidyverse.html"><a href="tidyverse.html#joontega-plotil-saab-fct_reorder2-abil-assotseerida-y-vaartused-suurimate-x-vaartustega"><i class="fa fa-check"></i><b>13.4.9</b> Joontega plotil saab <code>fct_reorder2()</code> abil assotseerida y väärtused suurimate x väärtustega</a></li>
<li class="chapter" data-level="13.4.10" data-path="tidyverse.html"><a href="tidyverse.html#tulpdiagrammide-korral-kasuta-fct_infreq"><i class="fa fa-check"></i><b>13.4.10</b> Tulpdiagrammide korral kasuta <code>fct_infreq()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html"><i class="fa fa-check"></i><b>14</b> lisa: funktsioonid</a><ul>
<li class="chapter" data-level="14.1" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#raamatukogud"><i class="fa fa-check"></i><b>14.1</b> raamatukogud</a><ul>
<li class="chapter" data-level="14.1.1" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#bioconductor"><i class="fa fa-check"></i><b>14.1.1</b> bioconductor</a></li>
<li class="chapter" data-level="14.1.2" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#github"><i class="fa fa-check"></i><b>14.1.2</b> Github</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#failide-sisselugemine"><i class="fa fa-check"></i><b>14.2</b> failide sisselugemine</a></li>
<li class="chapter" data-level="14.3" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#matemaatika"><i class="fa fa-check"></i><b>14.3</b> matemaatika</a></li>
<li class="chapter" data-level="14.4" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#andmeraamid"><i class="fa fa-check"></i><b>14.4</b> andmeraamid</a></li>
<li class="chapter" data-level="14.5" data-path="lisa-funktsioonid.html"><a href="lisa-funktsioonid.html#na-d-1"><i class="fa fa-check"></i><b>14.5</b> NA-d</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliograafia.html"><a href="bibliograafia.html"><i class="fa fa-check"></i>Bibliograafia</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstats-tartu/lectures" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reprodutseeritav andmeanalüüs kasutades R keelt</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1">
<h1><span class="header-section-number">13</span> Tidyverse</h1>
<p>Tidyverse on osa R-i ökosüsteemist, kus kehtivad omad reeglid. Tidyverse raamatukogud lähtuvad ühtsest filosoofiast ja töötavad hästi koos. Tidyverse algab andmetabeli struktuurist ja selle funktsioonid võtavad reeglina sisse õige struktuuriga tibble ja väljastavad samuti tibble, mis sobib hästi järgmise tidyverse funktsiooni sisendiks. Seega on tidyverse hästi sobiv läbi torude <code>%&gt;%</code> laskmiseks. Tidyverse-ga sobib hästi kokku ka ggplot2 graafikasüsteem.</p>
<p>Laadime tidyverse metapaketi raamatukogud:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<p>Nagu näha laaditakse tidyverse raamatukoguga 8 paketti:</p>
<p>✔ ggplot2 ✔ purrr<br />
✔ tibble ✔ dplyr<br />
✔ tidyr ✔ stringr<br />
✔ readr ✔ forcats</p>
<ul>
<li>tibble pakett sisaldab tidyverse-spetsiifilise andmeraami (data_frame) loomiseks ja manipuleerimiseks vajalike funktsioone. Erinevalt baas R-i andmeraamist (data.frame) iseloomustab tibble-t vaikimisi prindifunktsioon, kus vaikimisi näidataksegi ainult tabeli peast 10 esimest rida. Oluliseks erinevuseks on ka <strong>list tulpade toetus</strong> (data.frame tulbad saavad olla ainult vektorid). List tulbad võimaldavad andmeraami paigutada kõige erinevamaid objekte: näiteks vektoreid, andmeraame, lineaarseid mudeleid ja valgeid puudleid. Lisaks ei ole tibble tabelitel veerunimesid ja veidraid tulbanimesid ei muudeta vaikimisi/automaatselt.</li>
<li>tidyr pakett sisaldab eelkõige funktsioone tibble-de kuju muutmiseks laiast formaadist pikka ja tagasi.</li>
<li>readr paketi funktsioonid vastutavad andmete impordi eest tekstipõhistest failidest lähtuvalt tidyverse reeglitest ja asendavad vastavad baas R-i funktsioonid.</li>
<li>purrr pakett sisaldab funktsioone töötamaks listidega ja asendavad baas R-i apply perekonna funktsioone.</li>
<li>dplyr pakett sisaldab põhilisi andmetöötlusverbe.</li>
<li>stringr ja forcats paketid sisaldavad vastavalt tekstipõhiste ja kategooriliste andmetega töötamise funktsioone.</li>
</ul>
<div id="tidy-tabeli-struktuur" class="section level2">
<h2><span class="header-section-number">13.1</span> Tidy tabeli struktuur</h2>
<ul>
<li><strong>väärtus</strong> (<em>value</em>) — ühe mõõtmise tulemus (183 cm)</li>
<li><strong>muutuja</strong> (<em>variable</em>) — see, mida sa mõõdad (pikkus) või faktor (sex)</li>
<li><strong>andmepunkt</strong> (<em>observation</em>) — väärtused, mis mõõdeti samal katsetingimusel (1. subjekti pikkus ja kaal 3h ajapunktis)</li>
<li><strong>vaatlusühik</strong> (<em>unit of measurement</em>) — keda mõõdeti (subjekt nr)</li>
<li><strong>vaatlusühiku tüüp</strong> — inimene, hiir, jt</li>
</ul>
<blockquote>
<p>vaatlusühiku tüüp = tabel</p>
</blockquote>
<blockquote>
<p>muutuja = veerg</p>
</blockquote>
<blockquote>
<p>andmepunkt = rida</p>
</blockquote>
<blockquote>
<p>vaatlusühikute koodid on kõik koos ühes veerus</p>
</blockquote>
<p>Veergude järjekord tabelis on 1. vaatlusühik, 2. faktor, mis annab katse-kontrolli erisuse, 3. kõik see, mida otse ei mõõdetud (sex, batch nr, etc.), 4. numbritega veerud (iga muutuja kohta üks veerg)</p>
<pre><code>#&gt; # A tibble: 2 x 6
#&gt;   subject drug    sex    time length weigth
#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 1       exp     F         3    168     88
#&gt; 2 2       placebo M         3    176     91</code></pre>
<p>Nii näeb välja tidy tibble. Kõik analüüsil vajalikud parameetrid tuleks siia tabelisse veeru kaupa sisse tuua. Näiteks, kui mõõtmised on sooritatud erinevates keskustes erinevate inimeste poolt kasutades sama ravimi erinevaid preparaate, oleks hea siia veel 3 veergu lisada (center, experimenter, batch).</p>
<div id="tabeli-dimensioonide-muutmine-pikk-ja-lai-formaat" class="section level3">
<h3><span class="header-section-number">13.1.1</span> Tabeli dimensioonide muutmine (pikk ja lai formaat)</h3>
<p>Väga oluline osa tidyverses töötamisest on tabelite pika ja laia formaadi vahel viimine.</p>
<p>See on laias formaadis tabel df, mis ei ole tidy</p>
<pre><code>#&gt; # A tibble: 3 x 5
#&gt;   subject sex   control experiment_1 experiment_2
#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
#&gt; 1 Tim     M          23           34           40
#&gt; 2 Ann     F          31           38           42
#&gt; 3 Jill    F          30           36           44</code></pre>
<p>Kõigepealt pikka formaati. key ja value argumendid on ainult uute veergude nimetamiseks, oluline on 3:ncol(dat) argument, mis ütleb, et “kogu kokku veerud alates 3. veerust”. Alternatiivne viis seda öelda: c(-subject, -sex).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat_lng &lt;-<span class="st"> </span><span class="kw">gather</span>(dat, <span class="dt">key =</span> experiment, <span class="dt">value =</span> value, <span class="dv">3</span><span class="op">:</span><span class="kw">ncol</span>(dat))
<span class="co"># df_l3&lt;-df %&gt;% gather(experiment, value, 3:ncol(df)) works as well.</span>
<span class="co">#df_l4&lt;-df %&gt;% gather(experiment, value, c(-subject, -sex)) works as well</span>
dat_lng
<span class="co">#&gt; # A tibble: 9 x 4</span>
<span class="co">#&gt;   subject sex   experiment   value</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Tim     M     control         23</span>
<span class="co">#&gt; 2 Ann     F     control         31</span>
<span class="co">#&gt; 3 Jill    F     control         30</span>
<span class="co">#&gt; 4 Tim     M     experiment_1    34</span>
<span class="co">#&gt; 5 Ann     F     experiment_1    38</span>
<span class="co">#&gt; 6 Jill    F     experiment_1    36</span>
<span class="co">#&gt; # ... with 3 more rows</span></code></pre></div>
<p>Paneme selle tagasi algsesse laia formaati: ?spread</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">spread</span>(dat_lng, <span class="dt">key =</span> experiment, <span class="dt">value =</span> value)
<span class="co">#&gt; # A tibble: 3 x 5</span>
<span class="co">#&gt;   subject sex   control experiment_1 experiment_2</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Ann     F          31           38           42</span>
<span class="co">#&gt; 2 Jill    F          30           36           44</span>
<span class="co">#&gt; 3 Tim     M          23           34           40</span></code></pre></div>
<p>key viitab pika tabeli veerule, mille väärtustest tulevad laias tabelis uute veergude nimed. value viitab pika tabeli veerule, kust võetakse arvud, mis uues laias tabelis uute veergude vahel laiali jagatakse.</p>
</div>
<div id="tibble-transpose-read-veergudeks-ja-vastupidi" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Tibble transpose — read veergudeks ja vastupidi</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="st">&quot;tim&quot;</span>, <span class="st">&quot;tom&quot;</span>, <span class="st">&quot;jill&quot;</span>), <span class="dt">b1 =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dt">b2 =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>))
dat
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   a        b1    b2</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 tim       1     4</span>
<span class="co">#&gt; 2 tom       2     5</span>
<span class="co">#&gt; 3 jill      3     6</span></code></pre></div>
<p>Me kasutame selleks maatriksarvutuse funktsiooni t() — transpose. See võtab sisse ainult numbrilisi veerge, seega anname talle ette df miinus 1. veerg, mille sisu me konverteerime uue tablei veerunimedeks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat1 &lt;-<span class="st"> </span><span class="kw">t</span>(dat[,<span class="op">-</span><span class="dv">1</span>])
<span class="kw">colnames</span>(dat1) &lt;-<span class="st"> </span>dat<span class="op">$</span>a
dat1
<span class="co">#&gt;    tim tom jill</span>
<span class="co">#&gt; b1   1   2    3</span>
<span class="co">#&gt; b2   4   5    6</span></code></pre></div>
</div>
</div>
<div id="dplyr-ja-selle-viis-verbi" class="section level2">
<h2><span class="header-section-number">13.2</span> dplyr ja selle viis verbi</h2>
<p>Need tuleb teil omale pähe ajada sest nende 5 verbiga (pluss gather ja spread) saab lihtsalt teha 90% andmeväänamisest, mida teil elus ette tuleb. NB! Check the data wrangling cheatsheet and dplyr help for further details. dplyr laetakse koos tidyverse-ga automaatselt teie workspace-i.</p>
<div id="select-columns" class="section level3">
<h3><span class="header-section-number">13.2.1</span> <code>select()</code> columns</h3>
<p><code>select()</code> selects, renames, and re-orders columns.</p>
<p>Select columns from sex to value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris
<span class="kw">select</span>(iris, Petal.Length<span class="op">:</span>Species)
<span class="kw">select</span>(iris, <span class="op">-</span>(Petal.Length<span class="op">:</span>Species)) <span class="co">#selects everything, except those cols</span></code></pre></div>
<p>To select 3 columns and rename <em>subject</em> to <em>SUBJ</em> and put liik as the 1st col:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(iris, <span class="dt">liik =</span> Species, Sepal.Length, Sepal.Width) <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">as_data_frame</span>()
<span class="co">#&gt; # A tibble: 150 x 3</span>
<span class="co">#&gt;   liik   Sepal.Length Sepal.Width</span>
<span class="co">#&gt;   &lt;fct&gt;         &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 setosa          5.1         3.5</span>
<span class="co">#&gt; 2 setosa          4.9         3  </span>
<span class="co">#&gt; 3 setosa          4.7         3.2</span>
<span class="co">#&gt; 4 setosa          4.6         3.1</span>
<span class="co">#&gt; 5 setosa          5           3.6</span>
<span class="co">#&gt; 6 setosa          5.4         3.9</span>
<span class="co">#&gt; # ... with 144 more rows</span></code></pre></div>
<p>To select all cols, except sex and value, and rename the <em>subject</em> col:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">select</span>(iris, <span class="op">-</span>Sepal.Length, <span class="op">-</span>Sepal.Width, <span class="dt">liik =</span> Species)</code></pre></div>
<p><strong>helper functions you can use within select():</strong></p>
<p><code>starts_with(&quot;abc&quot;)</code>: matches names that begin with “abc.”</p>
<p><code>ends_with(&quot;xyz&quot;)</code>: matches names that end with “xyz.”</p>
<p><code>contains(&quot;ijk&quot;)</code>: matches names that contain “ijk.”</p>
<p><code>matches(&quot;(.)\\1&quot;)</code>: selects variables that match a regular expression. This one matches any variables that contain repeated characters.</p>
<p><code>num_range(&quot;x&quot;, 1:3)</code> matches x1, x2 and x3.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(iris)
<span class="kw">select</span>(iris, <span class="kw">starts_with</span>(<span class="st">&quot;Petal&quot;</span>))
<span class="co">#&gt; # A tibble: 150 x 2</span>
<span class="co">#&gt;   Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          1.4         0.2</span>
<span class="co">#&gt; 2          1.4         0.2</span>
<span class="co">#&gt; 3          1.3         0.2</span>
<span class="co">#&gt; 4          1.5         0.2</span>
<span class="co">#&gt; 5          1.4         0.2</span>
<span class="co">#&gt; 6          1.7         0.4</span>
<span class="co">#&gt; # ... with 144 more rows</span>
<span class="kw">select</span>(iris, <span class="kw">ends_with</span>(<span class="st">&quot;Width&quot;</span>))
<span class="co">#&gt; # A tibble: 150 x 2</span>
<span class="co">#&gt;   Sepal.Width Petal.Width</span>
<span class="co">#&gt;         &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1         3.5         0.2</span>
<span class="co">#&gt; 2         3           0.2</span>
<span class="co">#&gt; 3         3.2         0.2</span>
<span class="co">#&gt; 4         3.1         0.2</span>
<span class="co">#&gt; 5         3.6         0.2</span>
<span class="co">#&gt; 6         3.9         0.4</span>
<span class="co">#&gt; # ... with 144 more rows</span>

<span class="co"># Move Species variable to the front</span>
<span class="kw">select</span>(iris, Species, <span class="kw">everything</span>())
<span class="co">#&gt; # A tibble: 150 x 5</span>
<span class="co">#&gt;   Species Sepal.Length Sepal.Width Petal.Length</span>
<span class="co">#&gt;   &lt;fct&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1 setosa           5.1         3.5          1.4</span>
<span class="co">#&gt; 2 setosa           4.9         3            1.4</span>
<span class="co">#&gt; 3 setosa           4.7         3.2          1.3</span>
<span class="co">#&gt; 4 setosa           4.6         3.1          1.5</span>
<span class="co">#&gt; 5 setosa           5           3.6          1.4</span>
<span class="co">#&gt; 6 setosa           5.4         3.9          1.7</span>
<span class="co">#&gt; # ... with 144 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   Petal.Width &lt;dbl&gt;</span>

dat &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">100</span>), <span class="dt">nrow =</span> <span class="dv">10</span>))
dat &lt;-<span class="st"> </span><span class="kw">tbl_df</span>(dat[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">10</span>)])
<span class="kw">select</span>(dat, V9<span class="op">:</span>V6)
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt;       V9    V8    V5     V2     V6</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 0.514  0.858 0.532 0.507  0.110 </span>
<span class="co">#&gt; 2 0.455  0.292 0.327 0.251  0.992 </span>
<span class="co">#&gt; 3 0.839  0.927 0.964 0.681  0.0929</span>
<span class="co">#&gt; 4 0.0390 0.134 0.704 0.620  0.771 </span>
<span class="co">#&gt; 5 0.0206 0.864 0.847 0.887  0.409 </span>
<span class="co">#&gt; 6 0.698  0.232 0.851 0.0507 0.317 </span>
<span class="co">#&gt; # ... with 4 more rows</span>
<span class="kw">select</span>(dat, <span class="kw">num_range</span>(<span class="st">&quot;V&quot;</span>, <span class="dv">9</span><span class="op">:</span><span class="dv">6</span>))
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;       V9    V8      V7     V6</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 0.514  0.858 0.982   0.110 </span>
<span class="co">#&gt; 2 0.455  0.292 0.00324 0.992 </span>
<span class="co">#&gt; 3 0.839  0.927 0.428   0.0929</span>
<span class="co">#&gt; 4 0.0390 0.134 0.923   0.771 </span>
<span class="co">#&gt; 5 0.0206 0.864 0.918   0.409 </span>
<span class="co">#&gt; 6 0.698  0.232 0.198   0.317 </span>
<span class="co">#&gt; # ... with 4 more rows</span>

<span class="co"># Drop variables with -</span>
<span class="kw">select</span>(iris, <span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;Petal&quot;</span>))
<span class="co">#&gt; # A tibble: 150 x 3</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Species</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span>
<span class="co">#&gt; 1          5.1         3.5 setosa </span>
<span class="co">#&gt; 2          4.9         3   setosa </span>
<span class="co">#&gt; 3          4.7         3.2 setosa </span>
<span class="co">#&gt; 4          4.6         3.1 setosa </span>
<span class="co">#&gt; 5          5           3.6 setosa </span>
<span class="co">#&gt; 6          5.4         3.9 setosa </span>
<span class="co">#&gt; # ... with 144 more rows</span>

<span class="co"># Renaming -----------------------------------------</span>
<span class="co"># select() keeps only the variables you specify</span>
<span class="co"># rename() keeps all variables</span>
<span class="kw">rename</span>(iris, <span class="dt">petal_length =</span> Petal.Length)
<span class="co">#&gt; # A tibble: 150 x 5</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width petal_length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          5.1         3.5          1.4         0.2</span>
<span class="co">#&gt; 2          4.9         3            1.4         0.2</span>
<span class="co">#&gt; 3          4.7         3.2          1.3         0.2</span>
<span class="co">#&gt; 4          4.6         3.1          1.5         0.2</span>
<span class="co">#&gt; 5          5           3.6          1.4         0.2</span>
<span class="co">#&gt; 6          5.4         3.9          1.7         0.4</span>
<span class="co">#&gt; # ... with 144 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   Species &lt;fct&gt;</span></code></pre></div>
</div>
<div id="filter-rows" class="section level3">
<h3><span class="header-section-number">13.2.2</span> <code>filter()</code> rows</h3>
<p>Keep rows in Iris that have Species level “setosa” <strong>and</strong> Sepal.Length value &lt;4.5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(iris, Species<span class="op">==</span><span class="st">&quot;setosa&quot;</span> <span class="op">&amp;</span><span class="st"> </span>Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="fl">4.5</span>)
<span class="co">#&gt; # A tibble: 4 x 5</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          4.4         2.9          1.4         0.2</span>
<span class="co">#&gt; 2          4.3         3            1.1         0.1</span>
<span class="co">#&gt; 3          4.4         3            1.3         0.2</span>
<span class="co">#&gt; 4          4.4         3.2          1.3         0.2</span>
<span class="co">#&gt; # ... with 1 more variable: Species &lt;fct&gt;</span></code></pre></div>
<p>Keep rows in Iris that have Species level “setosa” <strong>or</strong> Sepal.Length value &lt;4.5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(iris, Species<span class="op">==</span><span class="st">&quot;setosa&quot;</span> <span class="op">|</span><span class="st"> </span>Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="fl">4.5</span>)
<span class="co">#&gt; # A tibble: 50 x 5</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          5.1         3.5          1.4         0.2</span>
<span class="co">#&gt; 2          4.9         3            1.4         0.2</span>
<span class="co">#&gt; 3          4.7         3.2          1.3         0.2</span>
<span class="co">#&gt; 4          4.6         3.1          1.5         0.2</span>
<span class="co">#&gt; 5          5           3.6          1.4         0.2</span>
<span class="co">#&gt; 6          5.4         3.9          1.7         0.4</span>
<span class="co">#&gt; # ... with 44 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   Species &lt;fct&gt;</span></code></pre></div>
<p>Keep rows in Iris that have Species level “not setosa” <strong>or</strong> Sepal.Length value &lt;4.5.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(iris, Species <span class="op">!=</span><span class="st">&quot;setosa&quot;</span> <span class="op">|</span><span class="st"> </span>Sepal.Length <span class="op">&lt;</span><span class="st"> </span><span class="fl">4.5</span>)
<span class="co">#&gt; # A tibble: 104 x 5</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          4.4         2.9          1.4         0.2</span>
<span class="co">#&gt; 2          4.3         3            1.1         0.1</span>
<span class="co">#&gt; 3          4.4         3            1.3         0.2</span>
<span class="co">#&gt; 4          4.4         3.2          1.3         0.2</span>
<span class="co">#&gt; 5          7           3.2          4.7         1.4</span>
<span class="co">#&gt; 6          6.4         3.2          4.5         1.5</span>
<span class="co">#&gt; # ... with 98 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   Species &lt;fct&gt;</span></code></pre></div>
<p>Kui tahame samast veerust filtreerida “või” ehk “|” abil mitu väärtust, on meil valida kahe samaväärse variandi vahel (tegelikult töötab 2. variant ka ühe väärtuse korral)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(iris, Species <span class="op">==</span><span class="st">&quot;setosa&quot;</span> <span class="op">|</span><span class="st"> </span>Species <span class="op">==</span><span class="st">&quot;versicolor&quot;</span>)
<span class="kw">filter</span>(iris, Species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>) )</code></pre></div>
<p>Nagu näha, 2. variant on oluliselt lühem.</p>
<p>Filtreerime regulaarekspressiooniga: read, kus Species algab v tähega</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(stringr)
<span class="kw">filter</span>(iris, <span class="kw">str_detect</span>(Species, <span class="st">&quot;^v&quot;</span>)) 
<span class="co">#&gt; # A tibble: 100 x 5</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          7           3.2          4.7         1.4</span>
<span class="co">#&gt; 2          6.4         3.2          4.5         1.5</span>
<span class="co">#&gt; 3          6.9         3.1          4.9         1.5</span>
<span class="co">#&gt; 4          5.5         2.3          4           1.3</span>
<span class="co">#&gt; 5          6.5         2.8          4.6         1.5</span>
<span class="co">#&gt; 6          5.7         2.8          4.5         1.3</span>
<span class="co">#&gt; # ... with 94 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   Species &lt;fct&gt;</span></code></pre></div>
<p>eemalda NAdega read kahe veeru põhjal</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(flights, <span class="op">!</span><span class="kw">is.na</span>(dep_delay), <span class="op">!</span><span class="kw">is.na</span>(arr_delay))</code></pre></div>
</div>
<div id="summarise" class="section level3">
<h3><span class="header-section-number">13.2.3</span> <code>summarise()</code></h3>
<p>Mitu rida summeeritakse üheks väärtuseks veeru kaupa. Kõigepealt summeerime kogu tabeli nii, et saame (1) keskmise Sepal-length-i, (2) standardhälbe samast, (3) tabeli ridade arvu ja (4) mitu erinevat Species-t on tabelis</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise</span>(iris, 
          <span class="dt">MEAN =</span> <span class="kw">mean</span>(Sepal.Length), 
          <span class="dt">SD =</span> <span class="kw">sd</span>(Sepal.Length), 
          <span class="dt">N =</span> <span class="kw">n</span>(), 
          <span class="dt">n_species =</span> <span class="kw">n_distinct</span>(Species))
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;    MEAN    SD     N n_species</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1  5.84 0.828   150         3</span></code></pre></div>
<p><code>n()</code> loeb üles, mitu väärtust läks selle summary statistic-u arvutusse,</p>
<p><code>n_distinct()</code> loeb üles, mitu unikaalset väärtust läks samasse arvutusse.</p>
<p>Summarise on kasulikum, kui teda kasutada koos järgmise verbi, group_by-ga.</p>
</div>
<div id="group_by" class="section level3">
<h3><span class="header-section-number">13.2.4</span> <code>group_by()</code></h3>
<p><code>group_by()</code> grupeerib väärtused, nii et neid saab grupi kaupa summeerida või muteerida. Näiteks grupeerides Species kaupa, saame arvutada summaarsed statistikud igale liigile</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris_grouped &lt;-<span class="st"> </span><span class="kw">group_by</span>(iris, Species) 
<span class="kw">summarise</span>(iris_grouped, 
          <span class="dt">MEAN =</span> <span class="kw">mean</span>(Sepal.Length), 
          <span class="dt">SD =</span> <span class="kw">sd</span>(Sepal.Length), 
          <span class="dt">N =</span> <span class="kw">n</span>(), 
          <span class="dt">n_species =</span> <span class="kw">n_distinct</span>(Species))
<span class="co">#&gt; # A tibble: 3 x 5</span>
<span class="co">#&gt;   Species     MEAN    SD     N n_species</span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 setosa      5.01 0.352    50         1</span>
<span class="co">#&gt; 2 versicolor  5.94 0.516    50         1</span>
<span class="co">#&gt; 3 virginica   6.59 0.636    50         1</span></code></pre></div>
<p><code>summarise()</code> argumendid on indentsed eelmise näitega aga tulemus ei ole. Siin me rakendame summarise verbi mitte kogu tabelile, vaid 3-le virtuaalsele tabelile, mis on saadud algsest tabelist.</p>
<p><code>group_by()</code>-le saab anda järjest mitu grupeerivat muutujat. Siis ta grupeerib kõigepealt neist esimese järgi, seejärel lõõb saadud grupid omakorda lahku teise argumendi järgi ja nii edasi kuni teie poolt antud argumendid otsa saavad.</p>
<p><em>pro tip</em> Kui tahad summaarseid statistikuid algse pika tabeli sisse uute veergudena (igale grupeeringu tasemele vastavad siis summeeriva statistiku identsed väärtused rea kaupa), kasuta peale <code>group_by()</code> verbi <code>mutate()</code>, mitte <code>summarise()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(iris_grouped,
       <span class="dt">MEAN =</span> <span class="kw">mean</span>(Sepal.Length), 
       <span class="dt">SD =</span> <span class="kw">sd</span>(Sepal.Length))
<span class="co">#&gt; # A tibble: 150 x 7</span>
<span class="co">#&gt; # Groups:   Species [3]</span>
<span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span class="co">#&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1          5.1         3.5          1.4         0.2</span>
<span class="co">#&gt; 2          4.9         3            1.4         0.2</span>
<span class="co">#&gt; 3          4.7         3.2          1.3         0.2</span>
<span class="co">#&gt; 4          4.6         3.1          1.5         0.2</span>
<span class="co">#&gt; 5          5           3.6          1.4         0.2</span>
<span class="co">#&gt; 6          5.4         3.9          1.7         0.4</span>
<span class="co">#&gt; # ... with 144 more rows, and 3 more variables:</span>
<span class="co">#&gt; #   Species &lt;fct&gt;, MEAN &lt;dbl&gt;, SD &lt;dbl&gt;</span></code></pre></div>
<p>Anna igast grupist 3 kõrgeimat väärtust või 2 madalaimat väärtust. Samad numbrid erinevates ridades antakse kõik - selle pärast on meil tabelis rohkem ridu.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">top_n</span>(iris_grouped, <span class="dv">3</span>, Sepal.Length)
<span class="kw">top_n</span>(iris_grouped, <span class="op">-</span><span class="dv">2</span>, Sepal.Length)</code></pre></div>
</div>
<div id="mutate" class="section level3">
<h3><span class="header-section-number">13.2.5</span> <code>mutate()</code></h3>
<p>Mutate põhikasutus on siiski uute veergude tekitamine, mis võtavad endale inputi rea kaupa. Seega tabeli ridade arv ei muutu.</p>
<p>tranformeeri tabeli “df” veerg “value” uueks veeruks “log_value”, kus on log2-transformeeritud numbrid: <code>df %&gt;% mutate(log_value = log2(value))</code>.</p>
<p>Uues veerus on vana veeru numbritest lahutatud konstant (näiteks vana veeru keskväärtus): <code>df %&gt;% mutate(centered_value = value - mean(value) )</code>.</p>
<p><strong>Mutate() lisab veerge ja <code>transmute()</code> kaotab ühtlasi ära vanad veerud</strong></p>
<p>Uus veerg log-väärtustega, mis põhineb “value” veerul, millele anname nime “log_value”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(dat_lng, <span class="dt">log_value =</span> <span class="kw">log</span>(value))
<span class="co">#&gt; # A tibble: 9 x 5</span>
<span class="co">#&gt;   subject sex   experiment   value log_value</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Tim     M     control         23      3.14</span>
<span class="co">#&gt; 2 Ann     F     control         31      3.43</span>
<span class="co">#&gt; 3 Jill    F     control         30      3.40</span>
<span class="co">#&gt; 4 Tim     M     experiment_1    34      3.53</span>
<span class="co">#&gt; 5 Ann     F     experiment_1    38      3.64</span>
<span class="co">#&gt; 6 Jill    F     experiment_1    36      3.58</span>
<span class="co">#&gt; # ... with 3 more rows</span></code></pre></div>
<p>Sama transmute() kasutades. Me säilitame lisaks “subject” veeru ja säilitame ning nimetame ümber “sex” veeru.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">transmute</span>(dat_lng, subject, <span class="dt">gender =</span> sex, <span class="dt">log_value =</span> <span class="kw">log</span>(value))
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;   subject gender log_value</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Tim     M           3.14</span>
<span class="co">#&gt; 2 Ann     F           3.43</span>
<span class="co">#&gt; 3 Jill    F           3.40</span>
<span class="co">#&gt; 4 Tim     M           3.53</span>
<span class="co">#&gt; 5 Ann     F           3.64</span>
<span class="co">#&gt; 6 Jill    F           3.58</span>
<span class="co">#&gt; # ... with 3 more rows</span></code></pre></div>
<p>Selekteerime veerud “year” kuni “day”, veerud, mille nimed lõppevad stringiga “delay”, veerud “distance” ja “air_time”. Seejärel loome uue veerud “gain” (kasutades selleks arr_delay ja dep_delay andmeid rea kaupa), “hours” (air_time jagatud konstandiga) ja “gain_per_hour”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_sml &lt;-<span class="st"> </span><span class="kw">select</span>(flights, 
                      year<span class="op">:</span>day, 
                      <span class="kw">ends_with</span>(<span class="st">&quot;delay&quot;</span>), 
                      distance, 
                      air_time) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gain =</span> arr_delay <span class="op">-</span><span class="st"> </span>dep_delay,
    <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,
    <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours)</code></pre></div>
<p><em><code>mutate_all()</code>, <code>mutate_if()</code> and <code>mutate_at()</code> and the three variants of <code>transmute()</code> (<code>transmute_all()</code>, <code>transmute_if()</code>, <code>transmute_at()</code>) make it easy to apply a transformation to a selection of variables. See help.</em></p>
<p>Kõigepealt grupeeri, siis muteeri. Konstandid Mean(value) ja sd(value) arvutatakse igale grupile eraldi selle grupi väärtuste pealt (siin grupeerime faktormuutuja “sex” kahe taseme järgi).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(dat_lng, sex) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">norm_value =</span> value <span class="op">/</span><span class="st"> </span><span class="kw">mean</span>(value), 
         <span class="dt">n2_val =</span> value <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(value))
<span class="co">#&gt; # A tibble: 9 x 6</span>
<span class="co">#&gt; # Groups:   sex [2]</span>
<span class="co">#&gt;   subject sex   experiment   value norm_value n2_val</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Tim     M     control         23      0.711   2.67</span>
<span class="co">#&gt; 2 Ann     F     control         31      0.842   5.47</span>
<span class="co">#&gt; 3 Jill    F     control         30      0.814   5.29</span>
<span class="co">#&gt; 4 Tim     M     experiment_1    34      1.05    3.94</span>
<span class="co">#&gt; 5 Ann     F     experiment_1    38      1.03    6.70</span>
<span class="co">#&gt; 6 Jill    F     experiment_1    36      0.977   6.35</span>
<span class="co">#&gt; # ... with 3 more rows</span></code></pre></div>
<p>Võrdluseks ilma grupeerimata olukord, kus konstandil alati sama väärtus:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(dat_lng, 
       <span class="dt">norm_value =</span> value <span class="op">/</span><span class="st"> </span><span class="kw">mean</span>(value), 
       <span class="dt">n2_val =</span> value <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(value))
<span class="co">#&gt; # A tibble: 9 x 6</span>
<span class="co">#&gt;   subject sex   experiment   value norm_value n2_val</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Tim     M     control         23      0.651   3.48</span>
<span class="co">#&gt; 2 Ann     F     control         31      0.877   4.69</span>
<span class="co">#&gt; 3 Jill    F     control         30      0.849   4.54</span>
<span class="co">#&gt; 4 Tim     M     experiment_1    34      0.962   5.14</span>
<span class="co">#&gt; 5 Ann     F     experiment_1    38      1.08    5.75</span>
<span class="co">#&gt; 6 Jill    F     experiment_1    36      1.02    5.44</span>
<span class="co">#&gt; # ... with 3 more rows</span></code></pre></div>
<div id="kahest-veerust-kolmanda-tegemine-nii-et-na-d-esimeses-veerus-asendatakse-numbritega-teisest" class="section level4">
<h4><span class="header-section-number">13.2.5.1</span> kahest veerust kolmanda tegemine nii, et NA-d esimeses veerus asendatakse numbritega teisest</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="ot">NA</span>, <span class="dv">5</span>)
z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">5</span>)
<span class="kw">coalesce</span>(z, y)
<span class="co">#&gt; [1] 1 2 7 4 5</span></code></pre></div>
</div>
<div id="summarise-mutate-transmute-ja-filter-tootavad-ka-mitme-veeru-kaupa." class="section level4">
<h4><span class="header-section-number">13.2.5.2</span> Summarise(), mutate(), transmute() ja filter() töötavad ka mitme veeru kaupa.</h4>
<p>Need variandid sisaldavad suffikseid _if, _at ja _all.</p>
<p>_if võimaldab valida veerge teise funktsiooni, nagu näiteks is.numeric() või is.character() alusel.</p>
<p>_at võimaldab valida veerge sama süntaksiga, mis select().</p>
<p>_all valib kõik veerud.</p>
<p><code>summarise_all(df, mean)</code> teeb sama asja, mis colMeans().</p>
<p><code>summarise_all(df, funs(min, max))</code> võtab iga veeru min ja max väärtuse.</p>
<p><code>summarise_all(df, ~ sd(.) / mean(.))</code> arvutab iga veeru CV (pane tähele ~ kasutust)</p>
<p><code>summarise_all(df, funs(cv = sd(.) / mean(.), mean))</code> arvutab iga veeru CV ja keskmise (~ puudub, kui meil on &gt;1 funktsiooni)</p>
<p><code>summarise_at(df, vars(-z), mean)</code> keskmine kõigist veergudest, v.a. z.</p>
<p><code>summarise_at(df, vars(x, y), funs(min, max))</code> kahe veeru min ja max.</p>
<p><code>summarise_if(is.numeric, mean, na.rm = TRUE)</code> ainult numbritega veerud</p>
<p><code>mutate_all(df, log10)</code> võta log10 kõikidest veergudest</p>
<p><code>mutate_all(df, ~ round(. * 25))</code> teeb kõik veerud täisarvulisteks ja korrutab 25-ga</p>
<p><code>mutate_all(df, funs(half = . / 2, double = . * 2))</code> rakendab 2 funktsiooni</p>
<p><code>transmute_all(df, funs(half = . / 2, double = . * 2))</code> jätab alles ainult uued veerud</p>
<p><code>filter_all(weather, any_vars(is.na(.)))</code> näitab ridu, mis sisaldavad NA-sid</p>
<p><code>filter_at(weather, vars(starts_with(&quot;wind&quot;)), all_vars(is.na(.)))</code> read, kus veerg, mis sisaldab wind, on NA.</p>
</div>
<div id="kasutame-group_by-summarise-toru-et-arvutada-rea-kaupa-statistik-p-vaartused" class="section level4">
<h4><span class="header-section-number">13.2.5.3</span> Kasutame group_by %&gt;% summarise toru, et arvutada rea kaupa statistik (p väärtused)</h4>
<p>Näiteks t test tidy tabelist. Meil on 5 geeni, N=3, võrreldakse kahte tingimust (indeks veerg, “E” ja “C”).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
a &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">gene=</span> <span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each=</span><span class="dv">6</span>), 
            <span class="dt">value=</span> <span class="kw">rnorm</span>(<span class="dv">30</span>), 
            <span class="dt">indeks=</span> <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;E&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dt">each=</span> <span class="dv">3</span>, <span class="dt">times=</span><span class="dv">5</span>))
<span class="kw">head</span>(a)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;    gene  value indeks</span>
<span class="co">#&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt; </span>
<span class="co">#&gt; 1     1 -2.33  E     </span>
<span class="co">#&gt; 2     1 -0.557 E     </span>
<span class="co">#&gt; 3     1 -2.20  E     </span>
<span class="co">#&gt; 4     1  0.512 C     </span>
<span class="co">#&gt; 5     1 -1.04  C     </span>
<span class="co">#&gt; 6     1 -0.817 C</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(gene) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">p =</span> <span class="kw">t.test</span>(value<span class="op">~</span>indeks)<span class="op">$</span>p.value)
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;    gene     p</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1 0.173</span>
<span class="co">#&gt; 2     2 0.471</span>
<span class="co">#&gt; 3     3 0.468</span>
<span class="co">#&gt; 4     4 0.801</span>
<span class="co">#&gt; 5     5 0.628</span></code></pre></div>
</div>
<div id="grupiviisiline-filtreerimine" class="section level4">
<h4><span class="header-section-number">13.2.5.4</span> Grupiviisiline filtreerimine</h4>
<p>Säilita lennureiside sihtkohad, kuhu viib &gt;365 lennu:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">popular_dests &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">n</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">365</span>)</code></pre></div>
<p>grupeeringu mahavõtmiseks, et töötada grupeerimata andmetega, kasuta <code>ungroup()</code>.</p>
</div>
</div>
</div>
<div id="separate-uks-veerg-mitmeks" class="section level2">
<h2><span class="header-section-number">13.3</span> <code>separate()</code> üks veerg mitmeks</h2>
<p>Siin on veel üks verb, mida aeg-ajalt kõigil vaja läheb. <code>separate()</code> võtab ühe veeru sisu (mis peab olema character string) ning jagab selle laiali mitme uue veeru vahel. Kui teda kasutada vormis <code>separate(df, old_Column, into=c(&quot;new_col1&quot;, &quot;new_col2&quot;, &quot;ja_nii_edasi&quot;))</code> siis püüab programm ise ära arvata, kustkohalt veeru sisu hakkida (tühikud, komad, semikoolonid, koolonid jne). Aga te võite eksplitsiitselt ette anda separaatori sep = “”. sep = 2 tähendab “peale 2. tähemärki”. sep = -6 tähendab “enne tagantpoolt 6. tähemärki”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">country =</span> <span class="kw">c</span>(<span class="st">&quot;Albania&quot;</span>), <span class="dt">disease.cases =</span> <span class="kw">c</span>(<span class="st">&quot;80/1000&quot;</span>)))
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;   country disease.cases</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;        </span>
<span class="co">#&gt; 1 Albania 80/1000</span>
(df.sep &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(disease.cases, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;thousand&quot;</span>)))
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   country cases thousand</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Albania 80    1000</span>
(df.sep &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(disease.cases, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;thousand&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>))
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   country cases thousand</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Albania 80    1000</span>
(df.sep &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(disease.cases, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;thousand&quot;</span>), <span class="dt">sep =</span> <span class="dv">2</span>))
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   country cases thousand</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Albania 80    /1000</span>
(df.sep &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(disease.cases, <span class="dt">into=</span><span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;thousand&quot;</span>), <span class="dt">sep =</span> <span class="op">-</span><span class="dv">5</span>))
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   country cases thousand</span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Albania 80    /1000</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">index =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), 
               <span class="dt">taxon =</span> <span class="kw">c</span>(<span class="st">&quot;Procaryota; Bacteria; Alpha-Proteobacteria; Escharichia&quot;</span>, <span class="st">&quot;Eukaryota; Chordata&quot;</span>)))
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;   index taxon                                         </span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;                                         </span>
<span class="co">#&gt; 1     1 Procaryota; Bacteria; Alpha-Proteobacteria; E…</span>
<span class="co">#&gt; 2     2 Eukaryota; Chordata</span>
(d1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(taxon, <span class="kw">c</span>(<span class="st">&#39;riik&#39;</span>, <span class="st">&#39;hmk&#39;</span>, <span class="st">&quot;klass&quot;</span>, <span class="st">&quot;perekond&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;; &#39;</span>, <span class="dt">extra =</span> <span class="st">&quot;merge&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>)) 
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt;   index riik      hmk      klass            perekond  </span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;     </span>
<span class="co">#&gt; 1     1 Procaryo… Bacteria Alpha-Proteobac… Escharich…</span>
<span class="co">#&gt; 2     2 Eukaryota Chordata &lt;NA&gt;             &lt;NA&gt;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># some special cases:</span>
(dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">index =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), 
               <span class="dt">taxon =</span> <span class="kw">c</span>(<span class="st">&quot;Prokaryota || Bacteria || Alpha-Proteobacteria || Escharichia&quot;</span>, <span class="st">&quot;Eukaryota || Chordata&quot;</span>)))
(d1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(taxon, <span class="kw">c</span>(<span class="st">&quot;riik&quot;</span>, <span class="st">&quot;hmk&quot;</span>, <span class="st">&quot;klass&quot;</span>, <span class="st">&quot;perekond&quot;</span>), <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">|</span><span class="ch">\\</span><span class="st">|&quot;</span>, <span class="dt">extra =</span> <span class="st">&quot;merge&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>)) </code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">index =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), 
              <span class="dt">taxon =</span> <span class="kw">c</span>(<span class="st">&quot;Prokaryota.Bacteria.Alpha-Proteobacteria.Escharichia&quot;</span>, <span class="st">&quot;Eukaryota.Chordata&quot;</span>))
(d1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(taxon, <span class="kw">c</span>(<span class="st">&#39;riik&#39;</span>, <span class="st">&#39;hmk&#39;</span>, <span class="st">&quot;klass&quot;</span>, <span class="st">&quot;perekond&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;[.]&#39;</span>, <span class="dt">extra =</span> <span class="st">&quot;merge&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>)) </code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(dat &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">index =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), 
               <span class="dt">taxon =</span> <span class="kw">c</span>(<span class="st">&quot;Prokaryota.Bacteria,Alpha-Proteobacteria.Escharichia&quot;</span>, <span class="st">&quot;Eukaryota.Chordata&quot;</span>)))
(d1 &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(taxon, <span class="kw">c</span>(<span class="st">&#39;riik&#39;</span>, <span class="st">&#39;hmk&#39;</span>, <span class="st">&quot;klass&quot;</span>, <span class="st">&quot;perekond&quot;</span>), <span class="dt">sep =</span> <span class="st">&#39;[,</span><span class="ch">\\</span><span class="st">.]&#39;</span>, <span class="dt">extra =</span> <span class="st">&quot;merge&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;right&quot;</span>))</code></pre></div>
<p>Anti-separate funktsioon on <code>unite()</code> - vt. help.</p>
<p>Kuidas käituda siis, kui teil on veerus üks või mitu sissekannet, näiteks komadega eraldatud, ja te tahaksite need suruda mitte eraldi veergudesse (seda teeb separate()), vaid kõik ühte pikka veergu? Nüüd kasutame str_plit() ja unnest() funktsioone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">a =</span> <span class="kw">c</span>(<span class="st">&quot;w&quot;</span>, <span class="st">&quot;w, e, f&quot;</span>, <span class="st">&quot;g&quot;</span>), <span class="dt">b=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
df2 &lt;-<span class="st"> </span>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">pikk_a =</span> <span class="kw">str_split</span>(a, <span class="st">&quot;,&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(pikk_a) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()
df3 &lt;-<span class="st"> </span>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">pikk_a =</span> <span class="kw">str_split</span>(a, <span class="st">&quot;,&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()</code></pre></div>
<p>Pane tähele, et df3 on tabel, kus b veeru elemendid on duplitseeritud nii, et nad kataksid uue pikema pikk_a veeru vastavad elemndid. df2 on andmeraam, mis sisaldab ainult üht veergu.</p>
</div>
<div id="faktorid" class="section level2">
<h2><span class="header-section-number">13.4</span> Faktorid</h2>
<p>Faktor on andmetüüp, mis oli ajalooliselt tähtsam kui ta praegu on. Sageli saame oma asja ära ajada character vectori andmetüübiga ja ei vaja faktorit. Aga siiski läheb faktoreid aeg-ajalt kõigil vaja.</p>
<blockquote>
<p>Faktorite abil töötame kategooriliste muutujatega, millel on fikseeritud hulk võimalikke väärtusi, mida me kõiki teame.</p>
</blockquote>
<p>Faktori väärtusi kutsutakse “tasemeteks” (levels). Näiteks: muutuja sex on 2 tasemega faktor (M, F)</p>
<p><strong>NB! Faktoriks muutes saame character vectori liikmete järjekorra muuta mitte-tähestikuliseks</strong></p>
<p>Me kasutame faktoritega töötamisel forcats paketti. Kõigepealt loome character vectori x1 nelja kuu nime ingliskeelse lühendiga.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(forcats)
x1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Mar&quot;</span>)</code></pre></div>
<p>Nüüd kujutlege, et vektor x1 sisaldab 10 000 elementi. Seda vektorit on raske sorteerida, ja trükivead on ka raskesti leitavad. Mõlema probleemi vastu aitab, kui me konverteerime x1-e faktoriks. Selleks, et luua uus faktor, peaks kõigepealt üles lugema selle faktori kõik võimalikud tasemed:</p>
<p>Nüüd loome uue faktori ehk muudame x1 character vektori y1 factor vektoriks. Erinevalt x1-st seostub iga y1 väärtusega faktori tase. Kui algses vektoris on mõni element, millele ei vasta näiteks trükivea tõttu ühtegi faktori taset, siis see element muudetakse NA-ks. Proovige see ise järele, viies trükivea sisse x1-e.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y1 &lt;-<span class="st"> </span><span class="kw">factor</span>(x1, <span class="dt">levels =</span> month.abb)
y1
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; 12 Levels: Jan Feb Mar Apr May Jun Jul Aug Sep ... Dec</span></code></pre></div>
<p>NB! <code>month.abb</code> on R objekt mis sisaldab kuude ingliskeelseid lühendeid.</p>
<p><strong>Kui sa faktorile tasemeid ette ei anna, siis need tekivad andmetest automaatselt ja tähestikulises järjekorras.</strong></p>
<p>Kui sa tahad, et faktori tasemed oleks samas järjekorras kui selle taseme esmakordne ilmumine teie andmetes siis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f2 &lt;-<span class="st"> </span><span class="kw">factor</span>(x1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_inorder</span>()
f2
<span class="co">#&gt; [1] Dec Apr Jan Mar</span>
<span class="co">#&gt; Levels: Dec Apr Jan Mar</span></code></pre></div>
<p><code>levels()</code> annab faktori tasemed ja nende järjekorra</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(f2)
<span class="co">#&gt; [1] &quot;Dec&quot; &quot;Apr&quot; &quot;Jan&quot; &quot;Mar&quot;</span></code></pre></div>
<p>Kui faktorid on tibbles oma veeruna, siis saab nende tasemed <code>count()</code> kasutades:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gss_cat <span class="co">#tibble, mille veerg &quot;race&quot; on faktor.</span>
<span class="co">#&gt; # A tibble: 21,483 x 9</span>
<span class="co">#&gt;    year marital   age race  rincome partyid relig denom</span>
<span class="co">#&gt;   &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;fct&gt; &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt;</span>
<span class="co">#&gt; 1  2000 Never …    26 White $8000 … Ind,ne… Prot… Sout…</span>
<span class="co">#&gt; 2  2000 Divorc…    48 White $8000 … Not st… Prot… Bapt…</span>
<span class="co">#&gt; 3  2000 Widowed    67 White Not ap… Indepe… Prot… No d…</span>
<span class="co">#&gt; 4  2000 Never …    39 White Not ap… Ind,ne… Orth… Not …</span>
<span class="co">#&gt; 5  2000 Divorc…    25 White Not ap… Not st… None  Not …</span>
<span class="co">#&gt; 6  2000 Married    25 White $20000… Strong… Prot… Sout…</span>
<span class="co">#&gt; # ... with 2.148e+04 more rows, and 1 more variable:</span>
<span class="co">#&gt; #   tvhours &lt;int&gt;</span>
gss_cat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(race)
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   race      n</span>
<span class="co">#&gt;   &lt;fct&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 Other  1959</span>
<span class="co">#&gt; 2 Black  3129</span>
<span class="co">#&gt; 3 White 16395</span></code></pre></div>
<p>Nii saame ka teada, mitu korda iga faktori tase selles tabelis esineb.</p>
<div id="tekitame-faktortulba-keerulisemal-teel" class="section level3">
<h3><span class="header-section-number">13.4.1</span> tekitame faktortulba keerulisemal teel</h3>
<p>dplyr::case_when(). Kui Sepal.Length on &gt; 5.8 või Sepal.Width &gt;4, siis uues veerus nimega fact ilmub tase “large”, kui Species = setosa, siis ilmub tase “I. setosa”, igal muul juhul ilmub “other”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
i &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(
    <span class="dt">fact =</span> <span class="kw">case_when</span>(
      Sepal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">5.8</span> <span class="op">|</span><span class="st"> </span>Sepal.Width <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> &quot;large&quot;</span>,
      Species <span class="op">==</span><span class="st"> &quot;setosa&quot;</span>        <span class="op">~</span><span class="st"> &quot;I. setosa&quot;</span>,
      <span class="ot">TRUE</span>                      <span class="op">~</span><span class="st">  &quot;other&quot;</span>
    ))</code></pre></div>
</div>
<div id="droplevels-viskab-valja-kasutamata-faktori-tasemed" class="section level3">
<h3><span class="header-section-number">13.4.2</span> <code>droplevels()</code> viskab välja kasutamata faktori tasemed</h3>
<p><code>df1$sex &lt;- droplevels(df1$sex)</code></p>
</div>
<div id="fct_recode-rekodeerib-faktori-tasemed" class="section level3">
<h3><span class="header-section-number">13.4.3</span> <code>fct_recode()</code> rekodeerib faktori tasemed</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gss_cat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(partyid)
<span class="co">#&gt; # A tibble: 10 x 2</span>
<span class="co">#&gt;   partyid                n</span>
<span class="co">#&gt;   &lt;fct&gt;              &lt;int&gt;</span>
<span class="co">#&gt; 1 No answer            154</span>
<span class="co">#&gt; 2 Don&#39;t know             1</span>
<span class="co">#&gt; 3 Other party          393</span>
<span class="co">#&gt; 4 Strong republican   2314</span>
<span class="co">#&gt; 5 Not str republican  3032</span>
<span class="co">#&gt; 6 Ind,near rep        1791</span>
<span class="co">#&gt; # ... with 4 more rows</span>
gss_cat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">partyid =</span> <span class="kw">fct_recode</span>(partyid,
                              <span class="st">&quot;Republican, strong&quot;</span>    =<span class="st"> &quot;Strong republican&quot;</span>,
                              <span class="st">&quot;Republican, weak&quot;</span>      =<span class="st"> &quot;Not str republican&quot;</span>,
                              <span class="st">&quot;Independent, near rep&quot;</span> =<span class="st"> &quot;Ind,near rep&quot;</span>,
                              <span class="st">&quot;Independent, near dem&quot;</span> =<span class="st"> &quot;Ind,near dem&quot;</span>,
                              <span class="st">&quot;Democrat, weak&quot;</span>        =<span class="st"> &quot;Not str democrat&quot;</span>,
                              <span class="st">&quot;Democrat, strong&quot;</span>      =<span class="st"> &quot;Strong democrat&quot;</span>,
                              <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;No answer&quot;</span>,
                              <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;Don&#39;t know&quot;</span>,
                              <span class="st">&quot;Other&quot;</span>                 =<span class="st"> &quot;Other party&quot;</span>
  )) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(partyid)
<span class="co">#&gt; # A tibble: 8 x 2</span>
<span class="co">#&gt;   partyid                   n</span>
<span class="co">#&gt;   &lt;fct&gt;                 &lt;int&gt;</span>
<span class="co">#&gt; 1 Other                   548</span>
<span class="co">#&gt; 2 Republican, strong     2314</span>
<span class="co">#&gt; 3 Republican, weak       3032</span>
<span class="co">#&gt; 4 Independent, near rep  1791</span>
<span class="co">#&gt; 5 Independent            4119</span>
<span class="co">#&gt; 6 Independent, near dem  2499</span>
<span class="co">#&gt; # ... with 2 more rows</span></code></pre></div>
<p><code>fct_recode()</code> ei puuduta neid tasemeid, mida selle argumendis ei mainita. Lisaks saab mitu vana taset muuta üheks uueks tasemeks.</p>
</div>
<div id="fct_collapse-annab-argumenti-sisse-vanade-tasemete-vektori-et-teha-vahem-uusi-tasemeid." class="section level3">
<h3><span class="header-section-number">13.4.4</span> <code>fct_collapse()</code> annab argumenti sisse vanade tasemete vektori, et teha vähem uusi tasemeid.</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gss_cat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">partyid =</span> <span class="kw">fct_collapse</span>(partyid,
                                <span class="dt">other =</span> <span class="kw">c</span>(<span class="st">&quot;No answer&quot;</span>, <span class="st">&quot;Don&#39;t know&quot;</span>, <span class="st">&quot;Other party&quot;</span>),
                                <span class="dt">rep =</span> <span class="kw">c</span>(<span class="st">&quot;Strong republican&quot;</span>, <span class="st">&quot;Not str republican&quot;</span>),
                                <span class="dt">ind =</span> <span class="kw">c</span>(<span class="st">&quot;Ind,near rep&quot;</span>, <span class="st">&quot;Independent&quot;</span>, <span class="st">&quot;Ind,near dem&quot;</span>),
                                <span class="dt">dem =</span> <span class="kw">c</span>(<span class="st">&quot;Not str democrat&quot;</span>, <span class="st">&quot;Strong democrat&quot;</span>)
  )) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(partyid)</code></pre></div>
</div>
<div id="fct_lump-loob-kokku-koik-vahem-arv-kordi-esinevad-tasemed." class="section level3">
<h3><span class="header-section-number">13.4.5</span> <code>fct_lump()</code> lööb kokku kõik vähem arv kordi esinevad tasemed.</h3>
<p>n parameeter ütleb, mitu algset taset tuleb alles jätta:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gss_cat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">relig =</span> <span class="kw">fct_lump</span>(relig, <span class="dt">n =</span> <span class="dv">5</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(relig, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">print</span>()
<span class="co">#&gt; # A tibble: 6 x 2</span>
<span class="co">#&gt;   relig          n</span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1 Protestant 10846</span>
<span class="co">#&gt; 2 Catholic    5124</span>
<span class="co">#&gt; 3 None        3523</span>
<span class="co">#&gt; 4 Other        913</span>
<span class="co">#&gt; 5 Christian    689</span>
<span class="co">#&gt; 6 Jewish       388</span></code></pre></div>
</div>
<div id="rekodeerime-pideva-muutuja-faktoriks" class="section level3">
<h3><span class="header-section-number">13.4.6</span> Rekodeerime pideva muutuja faktoriks</h3>
<p><code>cut()</code> jagab meie muutuja väärtused intervallidesse ja annab igale intervallile faktori taseme.</p>
<p><code>cut(x, breaks, labels = NULL, ordered_result = FALSE, ...)</code></p>
<p>breaks - either a numeric vector of two or more unique cut points or a single number &gt;1, giving the number of intervals into which x is to be cut. labels - labels for the levels of the resulting category. ordered_result - logical: should the result be an ordered factor?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
z1 &lt;-<span class="st"> </span><span class="kw">cut</span>(z, <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">10</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))
z1
<span class="co">#&gt;  [1] A A A B B B C C C C</span>
<span class="co">#&gt; Levels: A B C</span>
<span class="co">#Note that to include 1 in level “A” you need to start the first cut &lt;1, while at the right side 3 is included in the 1st cut (in factor level “A”)</span>
z2 &lt;-<span class="st"> </span><span class="kw">cut</span>(z, <span class="dt">breaks =</span> <span class="dv">3</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))
z2
<span class="co">#&gt;  [1] A A A A B B B C C C</span>
<span class="co">#&gt; Levels: A B C</span></code></pre></div>
<p><code>car::recode</code> aitab rekodeerida</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(car) 
x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>)
x
<span class="co">#&gt; [1] 1 2 3 1 2 3 1 2 3</span>
<span class="kw">recode</span>(x, <span class="st">&quot;c(1,2) = &#39;A&#39;; else = &#39;B&#39;&quot;</span>)
<span class="co">#&gt; [1] &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot;</span>
<span class="kw">recode</span>(x, <span class="st">&quot;c(1,2) = NA&quot;</span>)
<span class="co">#&gt; [1] NA NA  3 NA NA  3 NA NA  3</span>
<span class="kw">recode</span>(x, <span class="st">&quot;1:2 = &#39;A&#39;; 3 = &#39;B&#39;&quot;</span>)
<span class="co">#&gt; [1] &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot;</span></code></pre></div>
</div>
<div id="muudame-faktori-tasemete-jarjekorda-joonisel" class="section level3">
<h3><span class="header-section-number">13.4.7</span> Muudame faktori tasemete järjekorda joonisel</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## summeerime andmed
gsscat_sum  &lt;-<span class="st"> </span><span class="kw">group_by</span>(gss_cat, relig) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">age =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">tvhours =</span> <span class="kw">mean</span>(tvhours, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">n =</span> <span class="kw">n</span>())
## joonistame graafiku
p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(gsscat_sum, <span class="kw">aes</span>(tvhours, <span class="kw">fct_reorder</span>(relig, tvhours))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()
p</code></pre></div>
<p><img src="07-tidyverse_files/figure-html/unnamed-chunk-49-1.svg" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="fct_relevel-tostab-joonisel-osad-tasemed-teistest-ettepoole" class="section level3">
<h3><span class="header-section-number">13.4.8</span> <code>fct_relevel()</code> tõstab joonisel osad tasemed teistest ettepoole</h3>
<p>Argumendid on faktor f ja need tasemed (jutumärkides), mida sa tahad tõsta.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## täiendame eelmist graafikut ümberkorraldatud andmetega
p <span class="op">+</span><span class="st"> </span><span class="kw">aes</span>(tvhours, <span class="kw">fct_relevel</span>(relig, <span class="st">&quot;None&quot;</span>, <span class="st">&quot;Don&#39;t know&quot;</span>))</code></pre></div>
<p><img src="07-tidyverse_files/figure-html/unnamed-chunk-50-1.svg" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="joontega-plotil-saab-fct_reorder2-abil-assotseerida-y-vaartused-suurimate-x-vaartustega" class="section level3">
<h3><span class="header-section-number">13.4.9</span> Joontega plotil saab <code>fct_reorder2()</code> abil assotseerida y väärtused suurimate x väärtustega</h3>
<p>See muudab ploti paremini jälgitavaks:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## summeerime andmed
gsscat_sum &lt;-<span class="st"> </span><span class="kw">filter</span>(gss_cat, <span class="op">!</span><span class="kw">is.na</span>(age)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(age, marital) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">N=</span><span class="kw">n</span>())
## paneme andmed graafikule
<span class="kw">ggplot</span>(gsscat_sum, <span class="kw">aes</span>(age, N, <span class="dt">colour =</span> <span class="kw">fct_reorder2</span>(marital, age, N))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">colour =</span> <span class="st">&quot;marital&quot;</span>)</code></pre></div>
<p><img src="07-tidyverse_files/figure-html/unnamed-chunk-51-1.svg" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="tulpdiagrammide-korral-kasuta-fct_infreq" class="section level3">
<h3><span class="header-section-number">13.4.10</span> Tulpdiagrammide korral kasuta <code>fct_infreq()</code></h3>
<p>Loeme kokku erineva perekondliku staatusega isikud ja paneme need andmed tulpdiagrammi grupi suurusele vastupidises järjekorras st. väiksemad grupid tulevad enne.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(gss_cat, <span class="dt">marital =</span> <span class="kw">fct_infreq</span>(marital) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">fct_rev</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(marital)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>()</code></pre></div>
<p><img src="07-tidyverse_files/figure-html/unnamed-chunk-52-1.svg" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="kuraditosin-graafikut-mida-sa-peaksid-enne-surma-joonistama.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lisa-funktsioonid.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstats-tartu/lectures/edit/master/07-tidyverse.Rmd",
"text": "Edit"
},
"download": ["main.pdf", "main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
